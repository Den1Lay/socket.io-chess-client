(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{166:function(e,n,a){e.exports=a(348)},203:function(e,n){},206:function(e,n,a){},207:function(e,n,a){e.exports=a.p+"static/media/picture.7a4628fe.png"},208:function(e,n,a){},210:function(e,n,a){},211:function(e,n,a){},344:function(e,n,a){},346:function(e,n,a){},348:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),i=a(10),o=a(161),c=a(38),l=a(36),s=a(350),d=a(162),m=a(37),u=a(150),E=a(43),p={me:[],partner:[],inAir:null,next:"W",isLoginIn:!1},g=function(e,n){var a,t=n.id,r=n.x,i=n.y;return e.forEach((function(e,n){e.id===t&&(a=n)})),e[a]={id:t,X:r,Y:i},e},f=function(e,n){var a=n.x,t=n.y;console.log(e,a,t,"DARK MOVE");var r=e.filter((function(e){var n=e.X,r=e.Y;return!(n===a&&r===t)}));return console.log(r,"REEES"),r},h=function(e){var n=e.etalon,a=e.pre;return e.down?n.map((function(e){return{id:a?"W"+e.id:"D"+e.id,X:e.X,Y:"Pawn"===e.id.substr(0,4)?6:7}})):n.map((function(e){return{id:a?"W"+e.id:"D"+e.id,X:e.X,Y:e.Y}}))},y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.c,D=[u.a],b=Object(m.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"GAME:SET":console.log("GameSetUp");var a=[{id:"Rook1",X:0,Y:0},{id:"Knight1",X:1,Y:0},{id:"Elephant1",X:2,Y:0},{id:"Queen",X:3,Y:0},{id:"King",X:4,Y:0},{id:"Elephant2",X:5,Y:0},{id:"Knight2",X:6,Y:0},{id:"Rook2",X:7,Y:0},{id:"Pawn1",X:0,Y:1},{id:"Pawn2",X:1,Y:1},{id:"Pawn3",X:2,Y:1},{id:"Pawn4",X:3,Y:1},{id:"Pawn5",X:4,Y:1},{id:"Pawn6",X:5,Y:1},{id:"Pawn7",X:6,Y:1},{id:"Pawn8",X:7,Y:1}],t=n.payload,r=t.me,i=t.address,o="light"===r;return Object(E.a)({},e,{me:h({etalon:a,pre:o,down:!0}),partner:h({etalon:a,pre:!o}),address:i});case"MOVE:KNIGHT":console.log(n.payload.id,"PASSS");var c=e.me[0].id[0];return n.payload.id[0]===c?Object(E.a)({},e,{me:g(e.me,n.payload),partner:f(e.partner,n.payload),next:"W"===c?"D":"W"}):Object(E.a)({},e,{partner:g(e.partner,n.payload),me:f(e.me,n.payload),next:c});case"AIR:ADD":return Object(E.a)({},e,{inAir:n.payload});case"AIR:DELETE":return Object(E.a)({},e,{inAir:null});default:return Object(E.a)({},e)}}),y(m.a.apply(void 0,D))),v=a(51),w=a(3),x=a.n(w),X=a(151),_={moveTo:function(e,n,a){return{type:"MOVE:KNIGHT",payload:{id:e,x:n,y:a}}},addToAir:function(e){return{type:"AIR:ADD",payload:e}},deleteFromAir:function(){return{type:"AIR:DELETE"}},gameSet:function(e){return{type:"GAME:SET",payload:{address:e.address,me:e.me}}}},A=_.gameSet,Y=_.moveTo,k=a.n(X)()("http://localhost:4000");k.on("GAME:START_FINDING",(function(){console.log("CONFIRM")})),k.on("HANDSHAKE",(function(e){var n=e.socket;return console.log("Handshake: ".concat(n))})),k.on("GAME:FIND",(function(e){var n=e.partner,a=e.position;b.dispatch(A({address:n,me:a})),console.log("FIND Game with ".concat(n," and ").concat(a," position"))})),k.on("GAME:MOVE",(function(e){var n=e.payload,a=n.id,t=n.x,r=n.y;console.log("GetPayload"),b.dispatch(Y(a,t,r))}));var O=k,M=(a(206),Object(l.b)((function(e){return{me:e.me,partner:e.partner,inAir:e.inAir}}),_)((function(e){for(var n=e.me,a=e.partner,t=e.moveTo,i=e.inAir,o=[],c=0;c<64;c++)o.push(r.a.createElement(j,{x:c,key:c,me:n,partner:a,inAir:i,moveTo:t}));return r.a.createElement("div",{className:"board"},o)}))),N=a(355),I=a(356),T=(a(207),a(208),Object(l.b)((function(e){return{inAir:e.inAir,next:e.next,me:e.me,address:e.address}}),_)((function(e){var n=e.addToAir,a=e.deleteFromAir,t=e.moveTo,i=e.state,o=e.id,c=e.simbol,l=e.next,s=e.deadColor,d=e.me,m=e.address;console.log(s,"DEADCOLOR");var u=Object(I.a)({item:{type:"knight",id:o},begin:function(e){n(o),console.log("DEBAG STATE: ".concat(i))},end:function(e,n){var r=n.getDropResult();if(e&&r){var c=r.x,l=r.y;console.log("DEBAG STATE: ".concat(i)),console.log("MoveTo id: ".concat(o,", X:").concat(c,", y: ").concat(l)),t(o,c,l),O.emit("GAME:MOVE",{address:m,payload:{id:o,x:c,y:Math.abs(l-7)}}),a()}},collect:function(e){return{isDragging:!!e.isDragging()}}}),E=Object(v.a)(u,3),p=E[0].isDragging,g=E[1];E[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{ref:o[0]===l&&o[0]===d[0].id[0]?g:null,className:x()("knight",p&&"knight__isDraging",!s&&("D"===o[0]?"knight__darkSide":"knight__lightSide"),s&&"knight__deadColor")},c))}))),S=(a(210),function(e){var n=e.black,a=e.children,t=e.overlay;return t&&!a&&(a=r.a.createElement("div",{className:x()("square__boll","square__boll--".concat(t))})),r.a.createElement("div",null,r.a.createElement("div",{className:x()("square",n&&"square__black")},r.a.Children.map(a,(function(){return r.a.cloneElement(a,{deadColor:t})}))))}),G=function(e){var n=e.white,a=e.dark,t=e.X,r=e.Y,i=e.x,o=e.y,c=e.directions,l=[];return c.forEach((function(e){return function(e,i){for(var o=!0,c={newX:t,newY:r};o;)(c={newX:c.newX+e,newY:c.newY+i}).newX<=7&&c.newX>-1&&c.newY<=7&&c.newY>-1?(a.some((function(e){var n=e.X,a=e.Y;return n===c.newX&&a===c.newY}))&&(l.push(c),o=!1),n.some((function(e){var n=e.X,a=e.Y;return n===c.newX&&a===c.newY}))?o=!1:l.push(c)):o=!1}(e.xDir,e.yDir)})),l.some((function(e){var n=e.newX,a=e.newY;return n===i&&a===o}))},j=function(e){var n=e.x,a=e.me,t=e.partner,i=e.inAir;console.log(a,t);var o=n%8,c=~~(n/8),l=(o+c)%2===1,s=null,d=function(e){e.array.forEach((function(e){var n=e.X,a=e.Y,t=e.id;if(o===n&&c===a)switch(t.substr(1,4)){case"Rook":s=r.a.createElement(T,{id:t,simbol:"\u265c"});break;case"Elep":s=r.a.createElement(T,{id:t,simbol:"\u265d"});break;case"Knig":s=r.a.createElement(T,{id:t,simbol:"\u265e"});break;case"Pawn":s=r.a.createElement(T,{id:t,simbol:"\u265f"});break;case"Quee":s=r.a.createElement(T,{id:t,simbol:"\u265b"});break;case"King":s=r.a.createElement(T,{id:t,simbol:"\u265a"})}}))};d({array:a}),d({array:t});var m=Object(N.a)({accept:"knight",drop:function(){return{x:o,y:c}},canDrop:function(){return function(e,n,a,t,r){var i=e.filter((function(e){return e.id===a}))[0],o=i.X,c=i.Y,l=i.id;console.log("X: ".concat(o,", Y: ").concat(c,", AIR: ").concat(a));var s=o-t,d=c-r;return!e.some((function(e){var n=e.X,a=e.Y;return n===t&&a===r}))&&("WPawn"===l.slice(0,5)||"DPawn"===l.slice(0,5)||"WKing"===l||"DKing"===l?1===Math.abs(s)&&1===Math.abs(d)||1===Math.abs(s)&&0===Math.abs(d)||0===Math.abs(s)&&1===Math.abs(d):"WKnight"===l.slice(0,7)||"DKnight"===l.slice(0,7)?2===Math.abs(s)&&1===Math.abs(d)||1===Math.abs(s)&&2===Math.abs(d):"WQueen"===l||"DQueen"===l?G({white:e,dark:n,X:o,Y:c,x:t,y:r,directions:[{xDir:1,yDir:1},{xDir:-1,yDir:-1},{xDir:-1,yDir:1},{xDir:1,yDir:-1},{xDir:1,yDir:0},{xDir:-1,yDir:0},{xDir:0,yDir:1},{xDir:0,yDir:-1}]}):"WElephant"===l.slice(0,9)||"DElephant"===l.slice(0,9)?G({white:e,dark:n,X:o,Y:c,x:t,y:r,directions:[{xDir:1,yDir:1},{xDir:-1,yDir:-1},{xDir:-1,yDir:1},{xDir:1,yDir:-1}]}):"WRook"===l.slice(0,5)||"DRook"===l.slice(0,5)?G({white:e,dark:n,X:o,Y:c,x:t,y:r,directions:[{xDir:1,yDir:0},{xDir:-1,yDir:0},{xDir:0,yDir:1},{xDir:0,yDir:-1}]}):void 0)}(a,t,i,o,c)},collect:function(e){return{isOver:!!e.isOver(),canDrop:!!e.canDrop()}}}),u=Object(v.a)(m,2),E=u[0],p=E.isOver,g=E.canDrop,f=u[1],h=p&&!g?"red":!p&&g?"yellow":p&&g?"green":null;return r.a.createElement("div",{ref:f,style:{width:"12.5%",height:"12.5%"}},r.a.createElement(S,{key:n,black:l,overlay:h},s))},P=a(357),R=a(353),K=a(119),W=a(351),C=a(352),F=a(12),L=(a(211),function(){var e=function(e){e.preventDefault(),console.log(e)};return r.a.createElement("section",{className:x()("login")},r.a.createElement(W.a,{onSubmit:function(){return e},className:"login-form"},r.a.createElement(W.a.Item,null,r.a.createElement("span",null,"\u0412\u0425\u041e\u0414 / \u0420\u0415\u0413\u0418\u0421\u0422\u0420\u0410\u0426\u0418\u042f")),r.a.createElement(W.a.Item,null,r.a.createElement(C.a,{prefix:r.a.createElement(F.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"})),r.a.createElement(W.a.Item,null,r.a.createElement(C.a,{prefix:r.a.createElement(F.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),r.a.createElement(W.a.Item,null,r.a.createElement(K.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"))))}),B=(a(344),Object(l.b)((function(e){return{next:e.next,me:e.me,address:e.address}}))((function(e){var n=e.next,a=e.me,i=e.address,o=Object(t.useState)(!1),c=Object(v.a)(o,2),l=c[0],s=c[1];return r.a.createElement("section",{className:x()("home")},r.a.createElement("div",{className:"home__mainLine"},r.a.createElement("div",{className:"home__leftTab"},r.a.createElement("div",{className:"home__leftTab__login"},r.a.createElement(L,null))),r.a.createElement("div",{className:"home__gameBoard"},r.a.createElement("div",{className:"home__gameBoard__alertZone"},a.length>0?n===a[0].id[0]?r.a.createElement(P.a,{message:"\u0412\u0430\u0448 \u0445\u043e\u0434",type:"success",showIcon:!0}):r.a.createElement(P.a,{message:"\u0425\u043e\u0434 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430",type:"warning",showIcon:!0}):r.a.createElement(P.a,{message:"\u041f\u043e\u0440\u0430 \u0437\u0430\u0442\u0435\u0441\u0442\u0438\u0442\u044c \u044d\u0442\u043e\u0442 shit)",type:"success",showIcon:!0})),r.a.createElement(M,null),r.a.createElement("div",{className:"home__gameBoard__controlers"},r.a.createElement(R.a,{onChange:function(e){return console.log(e)}},"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438"),a.length>0?r.a.createElement(K.a,{onClick:function(){O.emit("GAME:ISTIME",{address:i})},type:"danger"},"\u041f\u041e\u0420\u0410 \u0423\u0416\u0415 \u0425\u041e\u0414\u0418\u0422\u042c!"):r.a.createElement(K.a,{onClick:function(){l?(O.emit("GAME:STOP_FINDING"),console.log("\u041f\u0440\u0435\u043a\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043f\u043e\u0438\u0441\u043a\u0430")):(console.log("\u041d\u0430\u0447\u0430\u043b\u043e \u043f\u043e\u0438\u0441\u043a\u0430"),O.emit("GAME:FINDING")),s(!l)},type:l?"dashed":"danger"},l?"\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u0438\u0441\u043a":"\u041d\u0430\u0439\u0442\u0438 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u0438\u043a\u0430!"))),r.a.createElement("div",{className:"home__rightTab"})))}))),V=(a(345),a(346),document.getElementById("root"));Object(i.render)(r.a.createElement(l.a,{store:b},r.a.createElement(s.a,{backend:d.a},r.a.createElement(o.a,null,r.a.createElement(c.a,{exact:!0,path:"/",component:B})))),V)}},[[166,1,2]]]);
//# sourceMappingURL=main.2010afa0.chunk.js.map